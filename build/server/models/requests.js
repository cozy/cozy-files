// Generated by CoffeeScript 1.8.0
var americano;

americano = require('americano-cozy');

module.exports = {
  contact: {
    all: americano.defaultRequests.all,
    byName: function(doc) {
      var dp, _i, _len, _ref, _results;
      if ((doc.fn != null) && doc.fn.length > 0) {
        return emit(doc.fn, doc);
      } else if (doc.n != null) {
        return emit(doc.n.split(';').join(' ').trim(), doc);
      } else {
        _ref = doc.datapoints;
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          dp = _ref[_i];
          if (dp.name === 'email') {
            _results.push(emit(dp.value, doc));
          } else {
            _results.push(void 0);
          }
        }
        return _results;
      }
    }
  },
  config: {
    all: americano.defaultRequests.all
  },
  contact_log: {
    all: americano.defaultRequests.all,
    bySnippet: function(doc) {
      var remote, snippet;
      remote = doc.remote.id || doc.remote.tel || doc.remote.mail;
      snippet = "" + doc.timestamp + " : " + doc.type + " ";
      snippet += "" + doc.direction + " " + remote;
      return emit(snippet, doc);
    },
    byRemote: function(doc) {
      var remote;
      remote = doc.remote.id || doc.remote.tel || doc.remote.mail;
      return emit(remote, doc);
    }
  },
  phone_communication_log: {
    all: americano.defaultRequests.all,
    bySnippet: function(doc) {
      return emit(doc.snippet, doc);
    },
    byNumber: function(doc) {
      return emit(doc.correspondantNumber, doc);
    }
  },
  todolist: {
    all: americano.defaultRequests.all
  },
  tree: {
    byType: function(doc) {
      return emit(doc.type, doc);
    }
  },
  task: {
    all: americano.defaultRequests.all
  }
};
