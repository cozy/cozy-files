{"version":3,"file":"public/javascripts/app.js","sources":["app/application.coffee","app/collections/breadcrumbs.coffee","app/collections/files.coffee","app/helpers/client.coffee","app/helpers/socket.coffee","app/initialize.coffee","app/lib/app_helpers.coffee","app/lib/base_view.coffee","app/lib/view_collection.coffee","app/locales/en.coffee","app/models/file.coffee","app/router.coffee","app/views/breadcrumbs.coffee","app/views/file.coffee","app/views/files.coffee","app/views/folder.coffee","app/views/modal.coffee","app/views/modal_share.coffee","app/views/progressbar.coffee","app/views/templates/breadcrumbs_element.jade","app/views/templates/file.jade","app/views/templates/file_edit.jade","app/views/templates/file_search.jade","app/views/templates/files.jade","app/views/templates/folder.jade","app/views/templates/modal.jade","app/views/templates/modal_share.jade","app/views/templates/progressbar.jade"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlEA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA9CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAzBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1GA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArFA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA5CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1GA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAtCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7HA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxDA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAxCA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjIA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAlHA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA/NA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApEA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjEA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1CA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA1BA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAvBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AArBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjBA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;;A,CCAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;;A","sourcesContent":["var BreadcrumbsManager, File, FileCollection, FolderView;\n\nFileCollection = require('./collections/files');\n\nBreadcrumbsManager = require(\"./collections/breadcrumbs\");\n\nFile = require('./models/file');\n\nFolderView = require('./views/folder');\n\nmodule.exports = {\n  initialize: function() {\n    var Router, el;\n    Router = require('router');\n    this.router = new Router();\n    this.breadcrumbs = new BreadcrumbsManager();\n    this.root = new File({\n      id: \"root\",\n      path: \"\",\n      name: \"\",\n      type: \"folder\"\n    });\n    this.folderView = new FolderView({\n      model: this.root,\n      breadcrumbs: this.breadcrumbs\n    });\n    el = this.folderView.render().$el;\n    $('body').append(el);\n    Backbone.history.start();\n    window.app = this;\n    if (typeof Object.freeze === 'function') {\n      return Object.freeze(this);\n    }\n  }\n};\n","var BreadcrumbsManager, File, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nFile = require('../models/file');\n\nmodule.exports = BreadcrumbsManager = (function(_super) {\n  __extends(BreadcrumbsManager, _super);\n\n  function BreadcrumbsManager() {\n    _ref = BreadcrumbsManager.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BreadcrumbsManager.prototype.model = File;\n\n  BreadcrumbsManager.prototype.add = function(folder) {\n    return BreadcrumbsManager.__super__.add.call(this, folder, {\n      sort: false\n    });\n  };\n\n  BreadcrumbsManager.prototype.push = function(folder) {\n    var found, treatment,\n      _this = this;\n    if (this.get(folder)) {\n      found = false;\n      treatment = function(model, callback) {\n        if (!found) {\n          if (model.id === folder.id) {\n            found = true;\n          }\n          return callback(null, [model]);\n        } else {\n          return callback(null);\n        }\n      };\n      return async.concatSeries(this.models, treatment, function(err, folders) {\n        if (err) {\n          return console.log(err);\n        } else {\n          return _this.reset(folders, {\n            sort: false\n          });\n        }\n      });\n    } else {\n      return this.add(folder, {\n        sort: false\n      });\n    }\n  };\n\n  BreadcrumbsManager.prototype.setRoot = function(root) {\n    this.reset();\n    this.root = root;\n    return this.add(root);\n  };\n\n  BreadcrumbsManager.prototype.popAll = function() {\n    return this.setRoot(this.root);\n  };\n\n  return BreadcrumbsManager;\n\n})(Backbone.Collection);\n","var File, FileCollection, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nFile = require('../models/file');\n\nmodule.exports = FileCollection = (function(_super) {\n  __extends(FileCollection, _super);\n\n  function FileCollection() {\n    _ref = FileCollection.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  FileCollection.prototype.model = File;\n\n  FileCollection.prototype.order = \"asc\";\n\n  FileCollection.prototype.url = 'files';\n\n  FileCollection.prototype.comparator = function(o1, o2) {\n    var n1, n2, sort, t1, t2;\n    console.log(\"comparator: \" + o1 + \", \" + o2);\n    n1 = o1.get(\"name\").toLocaleLowerCase();\n    n2 = o2.get(\"name\").toLocaleLowerCase();\n    t1 = o1.get(\"type\");\n    t2 = o2.get(\"type\");\n    sort = this.order === \"asc\" ? -1 : 1;\n    if (t1 === t2) {\n      if (n1 > n2) {\n        return -sort;\n      }\n      if (n1 < n2) {\n        return sort;\n      }\n      return 0;\n    } else if (t1 === \"file\") {\n      return -sort;\n    } else {\n      return sort;\n    }\n  };\n\n  return FileCollection;\n\n})(Backbone.Collection);\n","exports.request = function(type, url, data, callbacks) {\n  return $.ajax({\n    type: type,\n    url: url,\n    data: data,\n    success: callbacks.success,\n    error: callbacks.error\n  });\n};\n\nexports.get = function(url, callbacks) {\n  return exports.request(\"GET\", url, null, callbacks);\n};\n\nexports.post = function(url, data, callbacks) {\n  return exports.request(\"POST\", url, data, callbacks);\n};\n\nexports.put = function(url, data, callbacks) {\n  return exports.request(\"PUT\", url, data, callbacks);\n};\n\nexports.del = function(url, callbacks) {\n  return exports.request(\"DELETE\", url, null, callbacks);\n};\n","var File, SocketListener, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nFile = require('../models/file');\n\nmodule.exports = SocketListener = (function(_super) {\n  __extends(SocketListener, _super);\n\n  function SocketListener() {\n    _ref = SocketListener.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  SocketListener.prototype.models = {\n    'file': File,\n    'folder': File\n  };\n\n  SocketListener.prototype.events = ['file.create', 'file.update', 'file.delete', 'folder.create', 'folder.update', 'folder.delete'];\n\n  SocketListener.prototype.isInCurrentFolder = function(model) {\n    var cwd, mwd;\n    cwd = app.folderView.model.repository();\n    mwd = model.get(\"path\");\n    return mwd === cwd;\n  };\n\n  SocketListener.prototype.onRemoteCreate = function(model) {\n    if (this.isInCurrentFolder(model)) {\n      console.log(\"remote create\");\n      console.log(model);\n      if (!(this.collection.get(model.get(\"id\")))) {\n        return this.collection.add(model, {\n          merge: true\n        });\n      }\n    }\n  };\n\n  SocketListener.prototype.onRemoteDelete = function(model) {\n    if (this.isInCurrentFolder(model)) {\n      console.log(\"remote delete\");\n      console.log(model);\n      return this.collection.remove(model);\n    }\n  };\n\n  SocketListener.prototype.onRemoteUpdate = function(model, collection) {\n    if (this.isInCurrentFolder(model)) {\n      console.log(\"remote update\");\n      console.log(model);\n      return collection.add(model, {\n        merge: true\n      });\n    }\n  };\n\n  SocketListener.prototype.process = function(event) {\n    var doctype, id, model, operation,\n      _this = this;\n    doctype = event.doctype, operation = event.operation, id = event.id;\n    console.log(\"received: \" + operation + \":\" + doctype);\n    switch (operation) {\n      case 'create':\n        model = new this.models[doctype]({\n          id: id,\n          type: doctype\n        });\n        return model.fetch({\n          success: function(fetched) {\n            fetched.set({\n              type: doctype\n            });\n            return _this.onRemoteCreate(fetched);\n          }\n        });\n      case 'update':\n        return this.collections.forEach(function(collection) {\n          if (!(model = collection.get(id))) {\n            return;\n          }\n          return model.fetch({\n            success: function(fetched) {\n              if (fetched.changedAttributes()) {\n                fetched.set({\n                  type: doctype\n                });\n                return _this.onRemoteUpdate(fetched, collection);\n              }\n            }\n          });\n        });\n      case 'delete':\n        return this.collections.forEach(function(collection) {\n          if (!(model = collection.get(id))) {\n            return;\n          }\n          return _this.onRemoteDelete(model, collection);\n        });\n    }\n  };\n\n  return SocketListener;\n\n})(CozySocketListener);\n","var app;\n\napp = require('application');\n\n$(function() {\n  var initializeLocale, locale;\n  jQuery.event.props.push('dataTransfer');\n  $.fn.spin = function(opts, color) {\n    var nullapp, presets;\n    presets = {\n      tiny: {\n        lines: 8,\n        length: 2,\n        width: 2,\n        radius: 3\n      },\n      small: {\n        lines: 8,\n        length: 1,\n        width: 2,\n        radius: 5\n      },\n      large: {\n        lines: 10,\n        length: 8,\n        width: 4,\n        radius: 8\n      }\n    };\n    if (Spinner) {\n      return this.each(function() {\n        var $this, spinner;\n        $this = $(this);\n        spinner = $this.data(\"spinner\");\n        if (spinner != null) {\n          spinner.stop();\n          return $this.data(\"spinner\", null);\n        } else if (opts !== false) {\n          if (typeof opts === \"string\") {\n            if (opts in presets) {\n              opts = presets[opts];\n            } else {\n              opts = {};\n            }\n            if (color) {\n              opts.color = color;\n            }\n          }\n          spinner = new Spinner($.extend({\n            color: $this.css(\"color\")\n          }, opts));\n          spinner.spin(this);\n          return $this.data(\"spinner\", spinner);\n        }\n      });\n    } else {\n      console.log(\"Spinner class not available.\");\n      return nullapp = require('application');\n    }\n  };\n  locale = \"en\";\n  $.ajax(\"cozy-locale.json\", {\n    success: function(data) {\n      locale = data.locale;\n      return initializeLocale(locale);\n    },\n    error: function() {\n      return initializeLocale(locale);\n    }\n  });\n  return initializeLocale = function(locale) {\n    var err, locales, polyglot;\n    locales = {};\n    try {\n      locales = require(\"locales/\" + locale);\n    } catch (_error) {\n      err = _error;\n      locales = require(\"locales/en\");\n    }\n    polyglot = new Polyglot();\n    polyglot.extend(locales);\n    window.t = polyglot.t.bind(polyglot);\n    return app.initialize();\n  };\n});\n","(function() {\n  return (function() {\n    var console, dummy, method, methods, _results;\n    console = window.console = window.console || {};\n    method = void 0;\n    dummy = function() {};\n    methods = 'assert,count,debug,dir,dirxml,error,exception,\\\n                   group,groupCollapsed,groupEnd,info,log,markTimeline,\\\n                   profile,profileEnd,time,timeEnd,trace,warn'.split(',');\n    _results = [];\n    while (method = methods.pop()) {\n      _results.push(console[method] = console[method] || dummy);\n    }\n    return _results;\n  })();\n})();\n","var BaseView, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nmodule.exports = BaseView = (function(_super) {\n  __extends(BaseView, _super);\n\n  function BaseView() {\n    _ref = BaseView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  BaseView.prototype.template = function() {};\n\n  BaseView.prototype.initialize = function() {};\n\n  BaseView.prototype.getRenderData = function() {\n    var _ref1;\n    return {\n      model: (_ref1 = this.model) != null ? _ref1.toJSON() : void 0\n    };\n  };\n\n  BaseView.prototype.render = function() {\n    this.beforeRender();\n    this.$el.html(this.template(this.getRenderData()));\n    this.afterRender();\n    return this;\n  };\n\n  BaseView.prototype.beforeRender = function() {};\n\n  BaseView.prototype.afterRender = function() {};\n\n  BaseView.prototype.destroy = function() {\n    this.undelegateEvents();\n    this.$el.removeData().unbind();\n    this.remove();\n    return Backbone.View.prototype.remove.call(this);\n  };\n\n  return BaseView;\n\n})(Backbone.View);\n","var BaseView, ViewCollection, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('lib/base_view');\n\nmodule.exports = ViewCollection = (function(_super) {\n  __extends(ViewCollection, _super);\n\n  function ViewCollection() {\n    this.removeItem = __bind(this.removeItem, this);\n    this.addItem = __bind(this.addItem, this);\n    _ref = ViewCollection.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  ViewCollection.prototype.itemview = null;\n\n  ViewCollection.prototype.views = {};\n\n  ViewCollection.prototype.template = function() {\n    return '';\n  };\n\n  ViewCollection.prototype.itemViewOptions = function() {};\n\n  ViewCollection.prototype.collectionEl = null;\n\n  ViewCollection.prototype.onChange = function() {\n    return this.$el.toggleClass('empty', _.size(this.views) === 0);\n  };\n\n  ViewCollection.prototype.appendView = function(view) {\n    return this.$collectionEl.append(view.el);\n  };\n\n  ViewCollection.prototype.initialize = function() {\n    var collectionEl;\n    ViewCollection.__super__.initialize.apply(this, arguments);\n    this.views = {};\n    this.listenTo(this.collection, \"reset\", this.onReset);\n    this.listenTo(this.collection, \"add\", this.addItem);\n    this.listenTo(this.collection, \"remove\", this.removeItem);\n    if (this.collectionEl == null) {\n      return collectionEl = el;\n    }\n  };\n\n  ViewCollection.prototype.render = function() {\n    var id, view, _ref1;\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      view.$el.detach();\n    }\n    return ViewCollection.__super__.render.apply(this, arguments);\n  };\n\n  ViewCollection.prototype.afterRender = function() {\n    var id, view, _ref1;\n    this.$collectionEl = $(this.collectionEl);\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      this.appendView(view.$el);\n    }\n    this.onReset(this.collection);\n    return this.onChange(this.views);\n  };\n\n  ViewCollection.prototype.remove = function() {\n    this.onReset([]);\n    return ViewCollection.__super__.remove.apply(this, arguments);\n  };\n\n  ViewCollection.prototype.onReset = function(newcollection) {\n    var id, view, _ref1;\n    _ref1 = this.views;\n    for (id in _ref1) {\n      view = _ref1[id];\n      view.remove();\n    }\n    return newcollection.forEach(this.addItem);\n  };\n\n  ViewCollection.prototype.addItem = function(model) {\n    var options, view;\n    options = _.extend({}, {\n      model: model\n    }, this.itemViewOptions(model));\n    view = new this.itemview(options);\n    this.views[model.cid] = view.render();\n    this.appendView(view);\n    return this.onChange(this.views);\n  };\n\n  ViewCollection.prototype.removeItem = function(model) {\n    this.views[model.cid].remove();\n    delete this.views[model.cid];\n    return this.onChange(this.views);\n  };\n\n  return ViewCollection;\n\n})(BaseView);\n","module.exports = {\n  \"modal error\": \"Error\",\n  \"modal ok\": \"OK\",\n  \"modal error get files\": \"Error getting files from server\",\n  \"modal error get folders\": \"Error getting folders from server\",\n  \"modal error empty name\": \"The name can't be empty\",\n  \"modal error file invalid\": \"doesn't seem to be a valid file\",\n  \"breadcrumbs search title\": \"Search\",\n  \"modal error file exists\": \"Sorry, a file or folder having this name already exists\",\n  \"modal error file upload\": \"File could not be sent to server\",\n  \"modal error folder create\": \"Folder could not be created\",\n  \"modal error folder exists\": \"Sorry, a file or folder having this name already exists\",\n  \"modal are you sure\": \"Are you sure ?\",\n  \"modal delete msg\": \"Deleting cannot be undone\",\n  \"modal delete ok\": \"Delete\",\n  \"modal cancel\": \"cancel\",\n  \"modal delete error\": \"cancel\",\n  \"modal error in use\": \"Name already in use\",\n  \"modal error rename\": \"Name could not be changed\",\n  \"modal error empty name\": \"Name can't be ampty\",\n  \"modal shared link title\": \"Share this file on the internet\",\n  \"modal shared link msg\": \"You can use this address to let others download this file:\",\n  \"modal share error\": \"There was an error sharing this file\",\n  \"modal share send msg\": \"If you want to send people notifications, type their emails here (separated by commas):\",\n  \"modal share send btn\": \"Share\",\n  \"file edit save\": \"Save\",\n  \"file edit cancel\": \"cancel\",\n  \"upload caption\": \"Upload a new file\",\n  \"upload msg\": \"Choose the file to upload:\",\n  \"upload close\": \"Close\",\n  \"upload send\": \"Add\",\n  \"upload button\": \"Upload a file here\",\n  \"new folder caption\": \"Add a new folder\",\n  \"new folder msg\": \"Enter the folder's name:\",\n  \"new folder close\": \"Close\",\n  \"new folder send\": \"Create\",\n  \"new folder button\": \"Create a new folder\"\n};\n","var File, client, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nclient = require(\"../helpers/client\");\n\nmodule.exports = File = (function(_super) {\n  __extends(File, _super);\n\n  function File() {\n    _ref = File.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  File.prototype.sync = function(method, model, options) {\n    var progress;\n    progress = function(e) {\n      return model.trigger('progress', e);\n    };\n    _.extend(options, {\n      xhr: function() {\n        var xhr;\n        xhr = $.ajaxSettings.xhr();\n        if (xhr instanceof window.XMLHttpRequest) {\n          xhr.addEventListener('progress', progress, false);\n        }\n        if (xhr.upload) {\n          xhr.upload.addEventListener('progress', progress, false);\n        }\n        return xhr;\n      }\n    });\n    return Backbone.sync.apply(this, arguments);\n  };\n\n  File.prototype.urlRoot = function() {\n    if (this.get(\"type\") === \"folder\") {\n      return 'folders/';\n    } else if (this.get(\"type\") === \"search\") {\n      return 'search/';\n    } else {\n      return 'files/';\n    }\n  };\n\n  File.prototype.validate = function() {\n    var errors;\n    errors = [];\n    if (!this.get(\"name\") || this.get(\"name\") === \"\") {\n      errors.push({\n        field: 'name',\n        value: \"A name must be set.\"\n      });\n    }\n    if (errors.length > 0) {\n      return errors;\n    }\n  };\n\n  File.prototype.prepareCallbacks = function(callbacks, presuccess, preerror) {\n    var error, success, _ref1,\n      _this = this;\n    _ref1 = callbacks || {}, success = _ref1.success, error = _ref1.error;\n    if (presuccess == null) {\n      presuccess = function(data) {\n        return _this.set(data.app);\n      };\n    }\n    this.trigger('request', this, null, callbacks);\n    callbacks.success = function(data) {\n      if (presuccess) {\n        presuccess(data);\n      }\n      _this.trigger('sync', _this, null, callbacks);\n      if (success) {\n        return success(data);\n      }\n    };\n    return callbacks.error = function(jqXHR) {\n      if (preerror) {\n        preerror(jqXHR);\n      }\n      _this.trigger('error', _this, jqXHR, {});\n      if (error) {\n        return error(jqXHR);\n      }\n    };\n  };\n\n  File.prototype.repository = function() {\n    var rep;\n    rep = this.get(\"path\") + \"/\" + this.get(\"name\");\n    if (rep === \"/\") {\n      rep = \"\";\n    }\n    return rep;\n  };\n\n  File.prototype.findFiles = function(callbacks) {\n    this.prepareCallbacks(callbacks);\n    return client.post(\"\" + (this.urlRoot()) + \"files\", {\n      id: this.id\n    }, callbacks);\n  };\n\n  File.prototype.findFolders = function(callbacks) {\n    this.prepareCallbacks(callbacks);\n    return client.post(\"\" + (this.urlRoot()) + \"folders\", {\n      id: this.id\n    }, callbacks);\n  };\n\n  File.prototype.getZip = function(file, callbacks) {\n    this.prepareCallbacks(callbacks);\n    return client.post(\"\" + (this.urlRoot()) + this.id + \"/zip/\" + this.name, callbacks);\n  };\n\n  File.prototype.getAttachment = function(file, callbacks) {\n    this.prepareCallbacks(callbacks);\n    return client.post(\"\" + (this.urlRoot()) + this.id + \"/getAttachment/\" + this.name, callbacks);\n  };\n\n  return File;\n\n})(Backbone.Model);\n","var File, FolderView, Router, app, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\napp = require('application');\n\nFolderView = require('./views/folder');\n\nFile = require('./models/file');\n\nmodule.exports = Router = (function(_super) {\n  __extends(Router, _super);\n\n  function Router() {\n    _ref = Router.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  Router.prototype.routes = {\n    '': 'main',\n    'folders/:folderid': 'folder',\n    'search/:query': 'search'\n  };\n\n  Router.prototype.main = function() {\n    return app.folderView.changeActiveFolder(app.root);\n  };\n\n  Router.prototype.folder = function(id) {\n    var folder,\n      _this = this;\n    folder = new File({\n      id: id,\n      type: \"folder\"\n    });\n    return folder.fetch({\n      success: function(data) {\n        folder.set(data);\n        return app.folderView.changeActiveFolder(folder);\n      }\n    });\n  };\n\n  Router.prototype.search = function(query) {\n    var folder;\n    folder = new File({\n      id: query,\n      type: \"search\",\n      name: \"Search '\" + query + \"'\"\n    });\n    return app.folderView.changeActiveFolder(folder);\n  };\n\n  return Router;\n\n})(Backbone.Router);\n","var BaseView, BreadcrumbsView,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nmodule.exports = BreadcrumbsView = (function(_super) {\n  __extends(BreadcrumbsView, _super);\n\n  BreadcrumbsView.prototype.itemview = require('./templates/breadcrumbs_element');\n\n  BreadcrumbsView.prototype.tagName = \"ul\";\n\n  function BreadcrumbsView(collection) {\n    this.collection = collection;\n    BreadcrumbsView.__super__.constructor.call(this);\n  }\n\n  BreadcrumbsView.prototype.initialize = function() {\n    this.listenTo(this.collection, \"reset\", this.render);\n    this.listenTo(this.collection, \"add\", this.render);\n    return this.listenTo(this.collection, \"remove\", this.render);\n  };\n\n  BreadcrumbsView.prototype.render = function() {\n    var folder, _i, _len, _ref;\n    this.$el.html(\"\");\n    _ref = this.collection.models;\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      folder = _ref[_i];\n      this.$el.append(this.itemview({\n        model: folder\n      }));\n    }\n    return this;\n  };\n\n  return BreadcrumbsView;\n\n})(BaseView);\n","var BaseView, FileView, ModalShareView, ModalView, client, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nModalView = require(\"./modal\");\n\nModalShareView = require(\"./modal_share\");\n\nclient = require(\"../helpers/client\");\n\nmodule.exports = FileView = (function(_super) {\n  __extends(FileView, _super);\n\n  function FileView() {\n    this.onKeyPress = __bind(this.onKeyPress, this);\n    _ref = FileView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  FileView.prototype.className = 'folder-row';\n\n  FileView.prototype.tagName = 'tr';\n\n  FileView.prototype.templateNormal = require('./templates/file');\n\n  FileView.prototype.templateEdit = require('./templates/file_edit');\n\n  FileView.prototype.templateSearch = require('./templates/file_search');\n\n  FileView.prototype.events = {\n    'click a.file-delete': 'onDeleteClicked',\n    'click a.file-share': 'onShare',\n    'click a.file-edit': 'onEditClicked',\n    'click a.file-edit-save': 'onSaveClicked',\n    'click a.file-edit-cancel': 'render',\n    'keydown input': 'onKeyPress'\n  };\n\n  FileView.prototype.template = function(args) {\n    if (app.folderView.model.get(\"type\") === \"search\") {\n      return this.templateSearch(args);\n    } else {\n      return this.templateNormal(args);\n    }\n  };\n\n  FileView.prototype.initialize = function() {\n    return this.listenTo(this.model, 'change', this.render);\n  };\n\n  FileView.prototype.onDeleteClicked = function() {\n    var _this = this;\n    return new ModalView(t(\"modal are you sure\"), t(\"modal delete msg\"), t(\"modal delete ok\"), t(\"modal cancel\"), function(confirm) {\n      if (confirm) {\n        return _this.model.destroy({\n          error: function() {\n            return new ModalView(t(\"modal error\"), t(\"modal delete error\"), t(\"modal ok\"));\n          }\n        });\n      }\n    });\n  };\n\n  FileView.prototype.onEditClicked = function() {\n    var width;\n    width = this.$(\".caption\").width() + 10;\n    this.$el.html(this.templateEdit({\n      model: this.model.toJSON()\n    }));\n    this.$(\".file-edit-name\").width(width);\n    return this.$(\".file-edit-name\").focus();\n  };\n\n  FileView.prototype.onShare = function() {\n    var _this = this;\n    return client.get(\"fileshare/\" + this.model.id, {\n      success: function(data) {\n        console.log(data);\n        return new ModalShareView({\n          url: data.url,\n          model: _this.model\n        });\n      },\n      error: function(data) {\n        console.log(data);\n        return new ModalView(t(\"modal error\"), t(\"modal share error\"), t(\"modal ok\"));\n      }\n    });\n  };\n\n  FileView.prototype.onSaveClicked = function() {\n    var name,\n      _this = this;\n    name = this.$('.file-edit-name').val();\n    if (name && name !== \"\") {\n      return this.model.save({\n        name: name\n      }, {\n        patch: true,\n        wait: true,\n        success: function(data) {\n          return _this.render();\n        },\n        error: function(model, err) {\n          console.log(err);\n          if (err.status === 400) {\n            return new ModalView(t(\"modal error\"), t(\"modal error in use\"), t(\"modal ok\"));\n          } else {\n            return new ModalView(t(\"modal error\"), t(\"modal error rename\"), t(\"modal ok\"));\n          }\n        }\n      });\n    } else {\n      return new ModalView(t(\"modal error\"), t(\"modal error empty name\"), t(\"modal ok\"));\n    }\n  };\n\n  FileView.prototype.onKeyPress = function(e) {\n    if (e.keyCode === 13) {\n      return this.onSaveClicked();\n    }\n  };\n\n  return FileView;\n\n})(BaseView);\n","var File, FileCollection, FileView, FilesView, ModalView, ProgressbarView, SocketListener, ViewCollection, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nViewCollection = require('../lib/view_collection');\n\nFileView = require('./file');\n\nProgressbarView = require(\"./progressbar\");\n\nModalView = require(\"./modal\");\n\nFile = require('../models/file');\n\nFileCollection = require('../collections/files');\n\nSocketListener = require('../helpers/socket');\n\nmodule.exports = FilesView = (function(_super) {\n  __extends(FilesView, _super);\n\n  function FilesView() {\n    this.upload = __bind(this.upload, this);\n    this.addFile = __bind(this.addFile, this);\n    _ref = FilesView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  FilesView.prototype.template = require('./templates/files');\n\n  FilesView.prototype.itemview = FileView;\n\n  FilesView.prototype.collectionEl = '#table-items-body';\n\n  FilesView.views = {};\n\n  FilesView.prototype.initialize = function(collection, model) {\n    this.collection = collection;\n    this.model = model;\n    FilesView.__super__.initialize.call(this);\n    this.listenTo(this.collection, \"sort\", this.render);\n    this.listenTo(this.collection, \"remove\", this.render);\n    this.listenTo(this.collection, \"add\", this.render);\n    this.socket = new SocketListener();\n    return this.socket.watch(this.collection);\n  };\n\n  FilesView.prototype.addFile = function(attach) {\n    var file, fileAttributes, found, progress;\n    found = this.collection.findWhere({\n      name: attach.name\n    });\n    if (!found) {\n      fileAttributes = {\n        name: attach.name,\n        path: this.model.repository(),\n        type: \"file\"\n      };\n      file = new File(fileAttributes);\n      file.file = attach;\n      progress = new ProgressbarView(file);\n      $(\"#dialog-upload-file .modal-body\").append(progress.render().el);\n      return this.upload(file);\n    } else {\n      return new ModalView(t(\"modal error\"), \"\" + (t('modal error file exists')) + \": \" + attach.name, t(\"modal ok\"));\n    }\n  };\n\n  FilesView.prototype.upload = function(file) {\n    var formdata,\n      _this = this;\n    formdata = new FormData();\n    formdata.append('cid', file.cid);\n    formdata.append('name', file.get('name'));\n    formdata.append('path', file.get('path'));\n    formdata.append('file', file.file);\n    return file.save(null, {\n      contentType: false,\n      data: formdata,\n      success: function(data) {\n        return _this.collection.add(file, {\n          merge: true\n        });\n      },\n      error: function() {\n        return new ModalView(t(\"modal error\"), t(\"modal error file upload\"), t(\"modal ok\"));\n      }\n    });\n  };\n\n  FilesView.prototype.addFolder = function(folder) {\n    var found,\n      _this = this;\n    found = this.collection.findWhere({\n      name: folder.get(\"name\")\n    });\n    if (!found) {\n      return folder.save(null, {\n        success: function(data) {\n          return _this.collection.add(folder);\n        },\n        error: function(error) {\n          return new ModalView(t(\"modal error\"), t(\"modal error folder create\"), t(\"modal ok\"));\n        }\n      });\n    } else {\n      return new ModalView(t(\"modal error\"), t(\"modal error folder exists\"), t(\"modal ok\"));\n    }\n  };\n\n  return FilesView;\n\n})(ViewCollection);\n","var BaseView, BreadcrumbsView, File, FileCollection, FilesView, FolderView, ModalView, ProgressbarView, _ref,\n  __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nFilesView = require('./files');\n\nBreadcrumbsView = require(\"./breadcrumbs\");\n\nProgressbarView = require(\"./progressbar\");\n\nModalView = require(\"./modal\");\n\nFile = require('../models/file');\n\nFileCollection = require('../collections/files');\n\nmodule.exports = FolderView = (function(_super) {\n  __extends(FolderView, _super);\n\n  function FolderView() {\n    this.onSeachKeyPress = __bind(this.onSeachKeyPress, this);\n    this.onDragAndDrop = __bind(this.onDragAndDrop, this);\n    this.onAddFile = __bind(this.onAddFile, this);\n    this.onAddFolder = __bind(this.onAddFolder, this);\n    _ref = FolderView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  FolderView.prototype.template = require('./templates/folder');\n\n  FolderView.prototype.events = function() {\n    return {\n      'click a#button-new-folder': 'prepareNewFolder',\n      'click #new-folder-send': 'onAddFolder',\n      'click #upload-file-send': 'onAddFile',\n      'keyup input#search-box': 'onSeachKeyPress',\n      'keyup input#inputName': 'onAddFolderEnter'\n    };\n  };\n\n  FolderView.prototype.initialize = function(options) {\n    var prevent,\n      _this = this;\n    this.breadcrumbs = options.breadcrumbs;\n    this.breadcrumbs.setRoot(this.model);\n    prevent = function(e) {\n      e.preventDefault();\n      return e.stopPropagation();\n    };\n    this.$el.on(\"dragover\", prevent);\n    this.$el.on(\"dragenter\", prevent);\n    return this.$el.on(\"drop\", function(e) {\n      return _this.onDragAndDrop(e);\n    });\n  };\n\n  FolderView.prototype.getRenderData = function() {\n    return {\n      model: this.model\n    };\n  };\n\n  FolderView.prototype.afterRender = function() {\n    this.breadcrumbsView = new BreadcrumbsView(this.breadcrumbs);\n    return this.$(\"#crumbs\").append(this.breadcrumbsView.render().$el);\n  };\n\n  /*\n      Display and re-render the contents of the folder\n  */\n\n\n  FolderView.prototype.changeActiveFolder = function(folder) {\n    var _this = this;\n    this.model = folder;\n    this.breadcrumbs.push(folder);\n    return this.model.findFiles({\n      success: function(files) {\n        var file, _i, _len;\n        for (_i = 0, _len = files.length; _i < _len; _i++) {\n          file = files[_i];\n          file.type = \"file\";\n        }\n        return _this.model.findFolders({\n          success: function(folders) {\n            var _j, _len1, _ref1;\n            for (_j = 0, _len1 = folders.length; _j < _len1; _j++) {\n              folder = folders[_j];\n              folder.type = \"folder\";\n            }\n            if (_this.filesCollection) {\n              _this.stopListening(_this.filesCollection);\n            }\n            _this.filesCollection = new FileCollection(folders.concat(files));\n            _this.listenTo(_this.filesCollection, \"sync\", _this.hideUploadForm);\n            if (_this.filesList) {\n              if ((_ref1 = _this.filesList) != null) {\n                _ref1.destroy();\n              }\n            }\n            _this.filesList = new FilesView(_this.filesCollection, _this.model);\n            _this.$('#files').html(_this.filesList.$el);\n            return _this.filesList.render();\n          },\n          error: function(error) {\n            console.log(error);\n            return new ModalView(t(\"modal error\"), t(\"modal error get folders\"), t(\"modal ok\"));\n          }\n        });\n      },\n      error: function(error) {\n        console.log(error);\n        return new ModalView(t(\"modal error\"), t(\"modal error get files\"), t(\"modal ok\"));\n      }\n    });\n  };\n\n  /*\n      Upload/ new folder\n  */\n\n\n  FolderView.prototype.prepareNewFolder = function() {\n    var _this = this;\n    return setTimeout(function() {\n      return _this.$(\"#inputName\").focus();\n    }, 500);\n  };\n\n  FolderView.prototype.onAddFolderEnter = function(e) {\n    if (e.keyCode === 13) {\n      e.preventDefault();\n      e.stopPropagation();\n      return this.onAddFolder();\n    }\n  };\n\n  FolderView.prototype.onAddFolder = function() {\n    var folder;\n    folder = new File({\n      name: this.$('#inputName').val(),\n      path: this.model.repository(),\n      type: \"folder\"\n    });\n    console.log(\"creating folder \" + folder);\n    if (folder.validate()) {\n      return new ModalView(t(\"modal error\"), t(\"modal error empty name\"), t(\"modal ok\"));\n    } else {\n      this.filesList.addFolder(folder);\n      return $('#dialog-new-folder').modal('hide');\n    }\n  };\n\n  FolderView.prototype.onAddFile = function() {\n    var attach, _i, _len, _ref1, _results;\n    _ref1 = this.$('#uploader')[0].files;\n    _results = [];\n    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n      attach = _ref1[_i];\n      _results.push(this.filesList.addFile(attach));\n    }\n    return _results;\n  };\n\n  FolderView.prototype.onDragAndDrop = function(e) {\n    var atLeastOne, attach, _i, _len, _ref1;\n    e.preventDefault();\n    e.stopPropagation();\n    console.log(\"Drag and drop\");\n    atLeastOne = false;\n    _ref1 = e.dataTransfer.files;\n    for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n      attach = _ref1[_i];\n      if (attach.type === \"\") {\n        new ModalView(t(\"modal error\"), \"\" + attach.name + \" \" + (t('modal error file invalid')), t(\"modal ok\"));\n      } else {\n        this.filesList.addFile(attach);\n        atLeastOne = true;\n      }\n    }\n    if (atLeastOne) {\n      return $(\"#dialog-upload-file\").modal(\"show\");\n    }\n  };\n\n  FolderView.prototype.hideUploadForm = function() {\n    return $('#dialog-upload-file').modal('hide');\n  };\n\n  /*\n      Search\n  */\n\n\n  FolderView.prototype.onSeachKeyPress = function(e) {\n    var query;\n    query = this.$('input#search-box').val();\n    if (query !== \"\") {\n      this.displaySearchResults(query);\n      return app.router.navigate(\"search/\" + query);\n    } else {\n      return this.changeActiveFolder(this.breadcrumbs.root);\n    }\n  };\n\n  FolderView.prototype.displaySearchResults = function(query) {\n    var data, search;\n    this.breadcrumbs.popAll();\n    data = {\n      id: query,\n      name: \"\" + (t('breadcrumbs search title')) + \" '\" + query + \"'\",\n      type: \"search\"\n    };\n    search = new File(data);\n    return this.changeActiveFolder(search);\n  };\n\n  return FolderView;\n\n})(BaseView);\n","var BaseView, ModalView,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nmodule.exports = ModalView = (function(_super) {\n  __extends(ModalView, _super);\n\n  ModalView.prototype.template = require('./templates/modal');\n\n  ModalView.prototype.value = 0;\n\n  ModalView.prototype.events = {\n    \"click #modal-dialog-no\": \"onNo\",\n    \"click #modal-dialog-yes\": \"onYes\"\n  };\n\n  function ModalView(title, msg, yes, no, cb) {\n    this.title = title;\n    this.msg = msg;\n    this.yes = yes;\n    this.no = no;\n    this.cb = cb;\n    ModalView.__super__.constructor.call(this);\n  }\n\n  ModalView.prototype.initialize = function() {\n    this.render();\n    return this.$('#modal-dialog').modal('show');\n  };\n\n  ModalView.prototype.onYes = function() {\n    var _this = this;\n    if (this.cb) {\n      this.cb(true);\n    }\n    this.$('#modal-dialog').modal('hide');\n    return setTimeout(function() {\n      return _this.destroy();\n    }, 1000);\n  };\n\n  ModalView.prototype.onNo = function() {\n    var _this = this;\n    if (this.cb) {\n      this.cb(false);\n    }\n    this.$('#modal-dialog').modal('hide');\n    return setTimeout(function() {\n      return _this.destroy();\n    }, 1000);\n  };\n\n  ModalView.prototype.render = function() {\n    this.$el.append(this.template({\n      title: this.title,\n      msg: this.msg,\n      yes: this.yes,\n      no: this.no\n    }));\n    $(\"body\").append(this.el);\n    return this;\n  };\n\n  return ModalView;\n\n})(BaseView);\n","var BaseView, ModalShareView, ModalView, client, _ref,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nModalView = require(\"./modal\");\n\nclient = require(\"../helpers/client\");\n\nmodule.exports = ModalShareView = (function(_super) {\n  __extends(ModalShareView, _super);\n\n  function ModalShareView() {\n    _ref = ModalShareView.__super__.constructor.apply(this, arguments);\n    return _ref;\n  }\n\n  ModalShareView.prototype.template = require('./templates/modal_share');\n\n  ModalShareView.prototype.events = {\n    \"click #modal-dialog-share-send\": \"send\"\n  };\n\n  ModalShareView.prototype.initialize = function(options) {\n    console.log(options);\n    this.url = options.url;\n    this.model = options.model;\n    this.render();\n    return this.$('#modal-dialog').modal('show');\n  };\n\n  ModalShareView.prototype.send = function() {\n    var input, mails,\n      _this = this;\n    input = this.$('#modal-dialog-share-input').val();\n    console.log(input);\n    mails = input.replace(/\\s+/g, ' ').replace(/\\ /g, ',').replace(/\\,+/g, ',').split(\",\");\n    console.log(mails);\n    return client.post(\"fileshare/\" + this.model.id + \"/send\", {\n      users: mails\n    }, {\n      success: function(data) {\n        _this.$('#modal-dialog').modal('hide');\n        return setTimeout(function() {\n          return _this.destroy();\n        }, 1000);\n      },\n      error: function(data) {\n        return new ModalView(t(\"modal error\"), t(\"modal share error\"), t(\"modal ok\"));\n      }\n    });\n  };\n\n  ModalShareView.prototype.render = function() {\n    this.$el.append(this.template({\n      url: this.url\n    }));\n    $(\"body\").append(this.el);\n    return this;\n  };\n\n  return ModalShareView;\n\n})(BaseView);\n","var BaseView, ProgressbarView,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nBaseView = require('../lib/base_view');\n\nmodule.exports = ProgressbarView = (function(_super) {\n  __extends(ProgressbarView, _super);\n\n  ProgressbarView.prototype.className = 'progress';\n\n  ProgressbarView.prototype.template = require('./templates/progressbar');\n\n  ProgressbarView.prototype.value = 0;\n\n  function ProgressbarView(model) {\n    this.model = model;\n    ProgressbarView.__super__.constructor.call(this);\n  }\n\n  ProgressbarView.prototype.initialize = function() {\n    this.listenTo(this.model, 'progress', this.update);\n    return this.listenTo(this.model, 'sync', this.destroy);\n  };\n\n  ProgressbarView.prototype.update = function(e) {\n    var pc;\n    pc = parseInt(e.loaded / e.total * 100);\n    console.log(\"[Progress bar] : \" + pc + \" %\");\n    this.value = pc;\n    return this.render();\n  };\n\n  ProgressbarView.prototype.getRenderData = function() {\n    return {\n      value: this.value\n    };\n  };\n\n  return ProgressbarView;\n\n})(BaseView);\n","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nif ( model.id == \"root\")\n{\nbuf.push('<li><a href=\"#\"><span class=\"glyphicon glyphicon-folder-open\"></span></a></li>');\n}\nelse\n{\nif ( model.attributes.type == \"search\")\n{\nbuf.push('<li><a');\nbuf.push(attrs({ 'href':(\"#search/\" + (model.id) + \"\") }, {\"href\":true}));\nbuf.push('>' + escape((interp = model.attributes.name) == null ? '' : interp) + '</a></li>');\n}\nelse\n{\nbuf.push('<li><a');\nbuf.push(attrs({ 'href':(\"#folders/\" + (model.id) + \"\") }, {\"href\":true}));\nbuf.push('>' + escape((interp = model.attributes.name) == null ? '' : interp) + '</a></li>');\n}\n}\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nif ( model.type && model.type == \"folder\")\n{\nbuf.push('<td><span class=\"glyphicon glyphicon-folder-close no-hover icon\"></span><a');\nbuf.push(attrs({ 'href':(\"#folders/\" + (model.id) + \"\"), \"class\": ('caption') + ' ' + ('btn') + ' ' + ('btn-link') }, {\"href\":true}));\nbuf.push('>' + escape((interp = model.name) == null ? '' : interp) + '</a><div class=\"operations\"><a class=\"file-delete\"><span class=\"glyphicon glyphicon-remove-circle\"> </span></a><a class=\"file-edit\"><span class=\"glyphicon glyphicon-edit\"> </span></a><a');\nbuf.push(attrs({ 'href':(\"folders/\" + (model.id) + \"/zip/\" + (model.name) + \"\"), 'target':(\"_blank\") }, {\"href\":true,\"target\":true}));\nbuf.push('><span class=\"glyphicon glyphicon-cloud-download\"> </span></a></div></td><td></td><td class=\"file-date\"><span class=\"pull-right\">12:00 12/10/2013</span></td>');\n}\nelse\n{\nbuf.push('<td><span class=\"glyphicon glyphicon-file no-hover icon\"></span><a');\nbuf.push(attrs({ 'href':(\"files/\" + (model.id) + \"/attach/\" + (model.name) + \"\"), 'target':(\"_blank\"), \"class\": ('caption') + ' ' + ('btn') + ' ' + ('btn-link') }, {\"href\":true,\"target\":true}));\nbuf.push('>' + escape((interp = model.name) == null ? '' : interp) + '</a><div class=\"operations\"><a class=\"file-delete\"><span class=\"glyphicon glyphicon-remove-circle\"> </span></a><a class=\"file-edit\"><span class=\"glyphicon glyphicon-edit\"> </span></a><a');\nbuf.push(attrs({ 'href':(\"files/\" + (model.id) + \"/download/\" + (model.name) + \"\"), 'download':(\"\" + (model.name) + \"\") }, {\"href\":true,\"download\":true}));\nbuf.push('><span class=\"glyphicon glyphicon-cloud-download\"> </span></a><a class=\"file-share\"><span class=\"glyphicon glyphicon-share-alt\"></span></a></div></td><td></td><td class=\"file-date\"><span class=\"pull-right\">12:00 12/10/2013</span></td>');\n}\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<td>');\nif ( model.type && model.type == \"folder\")\n{\nbuf.push('<span class=\"glyphicon glyphicon-folder-close no-hover icon\"></span>');\n}\nelse\n{\nbuf.push('<span class=\"glyphicon glyphicon-folder-close no-hover icon\"></span>');\n}\nbuf.push('<input');\nbuf.push(attrs({ 'value':(model.name), \"class\": ('caption') + ' ' + ('file-edit-name') }, {\"value\":true}));\nbuf.push('/><a class=\"btn btn-sm btn-cozy file-edit-save\">' + escape((interp = t(\"file edit save\")) == null ? '' : interp) + '</a><a class=\"btn btn-sm btn-link file-edit-cancel\">' + escape((interp = t(\"file edit cancel\")) == null ? '' : interp) + '</a></td><td></td><td class=\"file-date\"><span class=\"pull-right\">12:00 12/10/2013</span></td>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nif ( model.type && model.type == \"folder\")\n{\nbuf.push('<td><span class=\"glyphicon glyphicon-folder-close no-hover icon\"></span><a');\nbuf.push(attrs({ 'href':(\"#folders/\" + (model.id) + \"\"), \"class\": ('caption') + ' ' + ('btn') + ' ' + ('btn-link') }, {\"href\":true}));\nbuf.push('>' + escape((interp = model.name) == null ? '' : interp) + '</a><div class=\"operations\"><a class=\"file-delete\"><span class=\"glyphicon glyphicon-remove-circle\"> </span></a><a class=\"file-edit\"><span class=\"glyphicon glyphicon-edit\"></span></a></div><p class=\"file-path\">' + escape((interp = model.path) == null ? '' : interp) + '/' + escape((interp = model.name) == null ? '' : interp) + '</p></td><td></td><td class=\"file-date\"><span class=\"pull-right\">12:00 12/10/2013</span></td>');\n}\nelse\n{\nbuf.push('<td><span class=\"glyphicon glyphicon-file no-hover icon\"></span><a');\nbuf.push(attrs({ 'href':(\"files/\" + (model.id) + \"/attach/\" + (model.name) + \"\"), 'target':(\"_blank\"), \"class\": ('caption') + ' ' + ('btn') + ' ' + ('btn-link') }, {\"href\":true,\"target\":true}));\nbuf.push('>' + escape((interp = model.name) == null ? '' : interp) + '</a><div class=\"operations\"><a class=\"file-delete\"><span class=\"glyphicon glyphicon-remove-circle\"> </span></a><a class=\"file-edit\"><span class=\"glyphicon glyphicon-edit\"> </span></a><a');\nbuf.push(attrs({ 'href':(\"files/\" + (model.id) + \"/download/\" + (model.name) + \"\"), 'download':(\"\" + (model.name) + \"\") }, {\"href\":true,\"download\":true}));\nbuf.push('><span class=\"glyphicon glyphicon-cloud-download\"> </span></a><a class=\"file-share\"><span class=\"glyphicon glyphicon-share-alt\"></span></a></div><p class=\"file-path\">' + escape((interp = model.path) == null ? '' : interp) + '/' + escape((interp = model.name) == null ? '' : interp) + '</p></td><td></td><td class=\"file-date\"><span class=\"pull-right\">12:00 12/10/2013</span></td>');\n}\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<table id=\"table-items\" class=\"table table-hover\"><tbody id=\"table-items-body\"></tbody></table>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div id=\"dialog-upload-file\" class=\"modal fade\"><div class=\"modal-dialog\"><div class=\"modal-content\"><div class=\"modal-header\"><button type=\"button\" data-dismiss=\"modal\" aria-hidden=\"true\" class=\"close\"></button><h4 class=\"modal-title\">' + escape((interp = t(\"upload caption\")) == null ? '' : interp) + '</h4></div><div class=\"modal-body\"><fieldset><div class=\"form-group\"><label for=\"uploader\">' + escape((interp = t(\"upload msg\")) == null ? '' : interp) + '</label><input id=\"uploader\" type=\"file\" multiple=\"multiple\"/></div></fieldset></div><div class=\"modal-footer\"><button type=\"button\" data-dismiss=\"modal\" class=\"btn btn-link\">' + escape((interp = t(\"upload close\")) == null ? '' : interp) + '</button><button id=\"upload-file-send\" type=\"button\" class=\"btn btn-cozy-contrast\">' + escape((interp = t(\"upload send\")) == null ? '' : interp) + '</button></div></div></div></div><div id=\"dialog-new-folder\" class=\"modal fade\"><div class=\"modal-dialog\"><div class=\"modal-content\"><div class=\"modal-header\"><button type=\"button\" data-dismiss=\"modal\" aria-hidden=\"true\" class=\"close\"></button><h4 class=\"modal-title\">' + escape((interp = t(\"new folder caption\")) == null ? '' : interp) + '</h4></div><div class=\"modal-body\"><fieldset><div class=\"form-group\"><label for=\"inputName\">' + escape((interp = t(\"new folder msg\")) == null ? '' : interp) + '</label><input id=\"inputName\" type=\"text\" class=\"form-control\"/></div></fieldset></div><div class=\"modal-footer\"><button type=\"button\" data-dismiss=\"modal\" class=\"btn btn-link\">' + escape((interp = t(\"new folder close\")) == null ? '' : interp) + '</button><button id=\"new-folder-send\" type=\"button\" class=\"btn btn-cozy\">' + escape((interp = t(\"new folder send\")) == null ? '' : interp) + '</button></div></div></div></div><div id=\"affixbar\" data-spy=\"affix\" data-offset-top=\"1\"><div class=\"container\"><div class=\"row\"><div class=\"col-lg-12\"><div class=\"pull-left\"><input id=\"search-box\" type=\"search\"/></div><div class=\"pull-right\"><p class=\"pull-right\"><a data-toggle=\"modal\" data-target=\"#dialog-upload-file\" class=\"btn btn-cozy-contrast\"><span class=\"glyphicon glyphicon-upload\"></span><span class=\"button-title-reponsive\"> ' + escape((interp = t(\"upload button\")) == null ? '' : interp) + '</span></a> <a id=\"button-new-folder\" data-toggle=\"modal\" data-target=\"#dialog-new-folder\" class=\"btn btn-cozy\"><span class=\"glyphicon glyphicon-plus-sign\"></span><span class=\"button-title-reponsive\"> ' + escape((interp = t(\"new folder button\")) == null ? '' : interp) + '</span></a></p></div></div></div></div></div><div class=\"container\"><div class=\"row content-shadow\"><div id=\"content\" class=\"col-lg-12\"><div id=\"crumbs\"></div><div id=\"files\"></div></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div id=\"modal-dialog\" class=\"modal fade\"><div class=\"modal-dialog\"><div class=\"modal-content\"><div class=\"modal-header\"><button type=\"button\" data-dismiss=\"modal\" aria-hidden=\"true\" class=\"close\"></button><h4 class=\"modal-title\">' + escape((interp = title) == null ? '' : interp) + '</h4></div><div class=\"modal-body\"><p>' + escape((interp = msg) == null ? '' : interp) + '</p></div><div class=\"modal-footer\">');\nif ( no)\n{\nbuf.push('<button id=\"modal-dialog-no\" type=\"button\" class=\"btn btn-link\">' + escape((interp = no) == null ? '' : interp) + '</button>');\n}\nif ( yes)\n{\nbuf.push('<button id=\"modal-dialog-yes\" type=\"button\" class=\"btn btn-cozy\">' + escape((interp = yes) == null ? '' : interp) + '</button>');\n}\nbuf.push('</div></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div id=\"modal-dialog\" class=\"modal fade\"><div class=\"modal-dialog\"><div class=\"modal-content\"><div class=\"modal-header\"><button type=\"button\" data-dismiss=\"modal\" aria-hidden=\"true\" class=\"close\"></button><h4 class=\"modal-title\">' + escape((interp = t('modal shared link title')) == null ? '' : interp) + '</h4></div><div class=\"modal-body\"><p>' + escape((interp = t('modal shared link msg')) == null ? '' : interp) + '<input');\nbuf.push(attrs({ 'value':(url), \"class\": ('form-control') }, {\"value\":true}));\nbuf.push('/></p><p>' + escape((interp = t('modal share send msg')) == null ? '' : interp) + '<input id=\"modal-dialog-share-input\" type=\"text\" class=\"form-control\"/></p></div><div class=\"modal-footer\"><button id=\"modal-dialog-share-send\" type=\"button\" class=\"btn btn-cozy\">' + escape((interp = t('modal share send btn')) == null ? '' : interp) + '</button></div></div></div></div>');\n}\nreturn buf.join(\"\");\n};","module.exports = function anonymous(locals, attrs, escape, rethrow, merge) {\nattrs = attrs || jade.attrs; escape = escape || jade.escape; rethrow = rethrow || jade.rethrow; merge = merge || jade.merge;\nvar buf = [];\nwith (locals || {}) {\nvar interp;\nbuf.push('<div class=\"progress progress-striped active\"><div');\nbuf.push(attrs({ 'role':(\"progressbar\"), 'aria-valuenow':(\"\" + (value) + \"\"), 'aria-valuemin':(\"0\"), 'aria-valuemax':(\"100\"), 'style':(\"width: \" + (value) + \"%\"), \"class\": ('progress-bar') + ' ' + ('progress-bar-success') }, {\"role\":true,\"aria-valuenow\":true,\"aria-valuemin\":true,\"aria-valuemax\":true,\"style\":true}));\nbuf.push('></div></div>');\n}\nreturn buf.join(\"\");\n};"]}